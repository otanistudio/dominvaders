<!doctype html>
<html>
<head>
  <title>DOM Invaders!</title>
  <script src="j/ender.js" type="text/javascript" charset="utf-8"></script>
  <style type="text/css" media="screen">
      body {
          background-color:#000;
      }

      div#gamespace {
          /*position:absolute; top:10px; bottom:20px; left:10px; right:10px;*/
          position:absolute; left:50%; top:50%;
          margin: -240px 0 0 -400px;
          height:480px;
          width:800px;
          outline:1px dashed #2d2d2d;
      }

      div#invaders {
          display:table;
          border-spacing:4px;
          position:relative;
          top:0;
          left:152px;
      }
      div#invaders div.invader {
          padding:2px 4px 2px 4px;
          outline: 1px solid red;
          width:32px;
          height:32px;
          display:table-cell;
          vertical-align: middle;
      }

      div.invader img {
          display:block;
          margin:auto;
      }
  </style>
</head>
<body>

<div id="gamespace">
  <div id="invaders"></div>
</div>

<script type="text/javascript" charset="utf-8">
!function() {
  "use strict"
  var column = 0
      , row = 0
      , invaders = $('div#invaders')
      , intervalId = null
      , scale = 10
      , movingAcross = true
      , direction = 1     // left/right direction (use sign)

      , invadersLeft = 0


      , move = function() {
          if(movingAcross && (invadersLeft >= 300 || invadersLeft <= 0) ) {
              direction *= -1
              movingAcross = false
              down()
          } else {
              movingAcross = true
              invadersLeft += direction * scale
              invaders.css({left:invadersLeft})
          }         
      }

      , down = function() {
          var top = parseInt(invaders.css('top'), 10)
          top += 50
          invaders.css({top:top})
      }
  
      for (row = 0; row < 5; row++) {    
          invaders.append('<div>')
      }

      $('div#invaders div').each(function(e, i) {
          var roaches = {
                  a:'i/A.gif', 
                  b:'i/B.gif', 
                  d:'i/D.gif'
              },
              types = ['a', 'b', 'b', 'd', 'd'],
              column = 0
              
          for(column = 0; column < 11; column++) {
              $(this).append('<div class="invader"><img src="' + roaches[types[i]] + '"></div>') 
          }
      })

      invaders.bind('click', function(e){
        e.preventDefault()
        if($.isNull(intervalId)) {
            intervalId = setInterval(function() {
                move()
            }, 1000)
        } else {
            clearInterval(intervalId)
            intervalId = null
        }
      })
}();
</script>

</body>
</html>
